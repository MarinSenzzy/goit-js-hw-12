{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/toast.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API = '54255948-743bb2e2e8edc610c07792dbd';\nconst BASE_URL = 'https://pixabay.com';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getImagesByQuery(query, page) {\n  const { data } = await axios.get('/api/', {\n    params: {\n      q: query || '',\n      image_type: 'photo',\n      key: API,\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page || 1,\n      per_page: 15,\n    },\n  });\n  console.log(data);\n\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nconst createMarkup = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n  <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n  <img\n  class=\"gallery-image\"\n  src=\"${webformatURL}\"\n  alt=\"${tags}\"\n  />\n  </a>\n   <ul class=\"discriptions\">\n      <li>\n        <p class=\"disc-title\">likes</p>\n        <p class=\"disc-text\">${likes}</p>\n      </li>\n      <li>\n        <p class=\"disc-title\">views</p>\n        <p class=\"disc-text\">${views}</p>\n      </li>\n      <li>\n        <p class=\"disc-title\">comments</p>\n        <p class=\"disc-text\">${comments}</p>\n      </li>\n      <li>\n        <p class=\"disc-title\">downloads</p>\n        <p class=\"disc-text\">${downloads}</p>\n      </li>\n    </ul>\n  </li>\n  `;\n      }\n    )\n    .join(' ');\n};\nexport function createGallery(images) {\n  galleryEl.insertAdjacentHTML('beforeend', createMarkup(images));\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMore.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton() {\n  loadMore.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport const toastError = message => {\n  iziToast.error({\n    message: message,\n    closeOnClick: true,\n    close: false,\n    position: 'topRight',\n    transitionIn: 'fadeInLeft',\n    transitionOut: 'fadeOutLeft',\n  });\n};\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\nimport { toastError } from './js/toast';\n\nconst formEl = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 35;\nlet totalImage = null;\nlet searchQuery = null;\n\nformEl.addEventListener('submit', searchSubmitFn);\nloadMoreBtn.addEventListener('click', loadMoreFn);\n\nfunction searchSubmitFn(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n\n  hideLoadMoreButton();\n\n  const {\n    'search-text': { value: searchValue },\n  } = form.elements;\n  searchQuery = searchValue.trim();\n  if (!searchQuery) {\n    toastError('Please fill in the search field!');\n    return;\n  }\n  page = 1;\n\n  clearGallery();\n  tryCreateGallery(searchQuery, page);\n  form.reset();\n}\n\nasync function tryCreateGallery(searchQuery, page) {\n  showLoader();\n  try {\n    const dataImage = await getImagesByQuery(searchQuery, page);\n    totalImage = dataImage.total;\n    if (totalImage === 0) {\n      toastError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    createGallery(dataImage.hits);\n    if (page * 15 < totalImage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      if (page > 1) {\n        toastError(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    }\n  } catch (error) {\n    console.log(error);\n    // hideLoadMoreButton();\n\n    // if (error.response) {\n    //   toastError(error.response.status);\n    //   console.log(error.response.data);\n    //   console.log(error.response.status);\n    //   console.log(error.response.headers);\n    // } else if (error.request) {\n    //   toastError('error request');\n    //   console.log(error.request);\n    // } else {\n    //   toastError(error.message);\n    //   console.log('Error', error.message);\n    // }\n    // console.log(error.config);\n\n    toastError(error.message);\n  } finally {\n    hideLoader();\n  }\n}\nasync function loadMoreFn(event) {\n  page += 1;\n  await tryCreateGallery(searchQuery, page);\n  const liEl = document.querySelector('.gallery .gallery-item');\n  const liElResult = liEl.getBoundingClientRect();\n  const liHight = liElResult.height * 2;\n  console.log('ðŸš€ ~ loadMoreFn ~ liHight:', liHight);\n\n  window.scrollBy({\n    top: liHight,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API","BASE_URL","axios","getImagesByQuery","query","page","data","galleryEl","loader","loadMore","lightbox","SimpleLightbox","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","toastError","message","iziToast","formEl","loadMoreBtn","totalImage","searchQuery","searchSubmitFn","loadMoreFn","event","form","searchValue","tryCreateGallery","dataImage","error","liHight"],"mappings":"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"}